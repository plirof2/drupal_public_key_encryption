<?php

function get_my_private_Key()
{
$private_my_key='-----BEGIN PRIVATE KEY----- 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 yUYdIf4Al4Enl+VHHyHLt/C0Z0+MLDY= -----END PRIVATE KEY-----';

    return $private_my_key;
}

function get_my_public_Key()
{
$public_my_key='-----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzqRs3dEjIF8CMlZGpZsD yoAzqDFWe6/ezwhobK9TPewKibWl0JS+jFnssbFN4fglInbcHE8JLIqirKSWDCqW ZhklZnH1Yo68cpYcBy8d2ktoHmzP9z+KdehRugPAwwtidqCcTYu4Gd8xWXNQWJgF 1YCAz8jXlh1YlCLEodekZZNfVgaTCLImdpG0JWWbt6W/N2fGK86XPOqb0ZVsekXJ a6OY2a2+XBygTJbsDySaXy1i2zqXwv8b1XmN9CnExBjkN6RJvv2Mb3NE3xQABtpl W/xhy2Lso/JFFAdNpC1EmBEy0M1EqIfgAogtrs3btOE6McaiGQMNTBSxfCd7xRFu +zFYKiYmhGn90LV/UDcvjfOdqkDQKzLaZxci+jM9X/zsMC1BHWPO7LR1Yaa5oUVF 07FLbnng1/vS07898F7MbAIdsJsDsMGg7Uvpfm/UcMCkDVCgXOp8jyH0dYLBiRxS rcNhauP372NQcPHugBdvxTOH7b73k8SSw7+RMkwb1XPdQYiFmknm5OmurCOSSks6 qZr2U8mn4rjuQTgiirVcLqOJ10TtU447Q9Pa6Ys1ZF39VMhfq+gs30lBKjClwQ6q aDkWqRbtAAooaEostGk9LyaEzINV93KKWVuT/b8trCIYsFrjl7FrduHry70gn0PL oL5VRgKY3ggXmiGe4SCE9isCAwEAAQ== -----END PUBLIC KEY-----';

    return $public_my_key;
}

// Generate a public and private key
function generate()
{
	//shell_exec('export RANDFILE="/opt/lampp/htdocs/.rnd";openssl ecparam -genkey -name secp256k1');
	shell_exec('export RANDFILE="/opt/lampp/htdocs/.rnd"');
    // Set the key parameters
    $config = array(
        "digest_alg" => "sha512",
        "private_key_bits" => 4096,
        "private_key_type" => OPENSSL_KEYTYPE_RSA,
    );

    // Create the private and public key
    echo  "<HR>";
    $res = openssl_pkey_new($config);
    echo  "<HR>";
print_r($res); 
echo  "<HR>";
    // Extract the private key from $res to $privKey
    openssl_pkey_export($res, $privKey);

    // Extract the public key from $res to $pubKey
    $pubKey = openssl_pkey_get_details($res);

    return array(
        'private' => $privKey,
        'public' => $pubKey["key"],
        'type' => $config,
    );
}

// Encrypt data using the public key
function encrypt($data, $publicKey)
{
    // Encrypt the data using the public key
   openssl_public_encrypt($data, $encryptedData, get_my_public_Key());
echo  "<HR>publicKey= $publicKey";
    // Return encrypted data
    return $encryptedData;
}

// Decrypt data using the private key
function decrypt($data, $privateKey)
{
    // Decrypt the data using the private key
   openssl_private_decrypt($data, $decryptedData, get_my_private_Key());
   echo  "<HR>privateKey = $privateKey";

    // Return decrypted data
    return $decryptedData;
}

// Encrypt and then decrypt a string
echo  "<HR>";
echo  "<HR>";
echo  "<HR>";
echo  "<HR>";
echo  "<HR>";
$arrKeys = generate();
$strEncrypted = encrypt('Hello World!', $arrKeys['public']);
echo $strEncrypted;
echo  "<HR>";
$strDecrypted = decrypt($strEncrypted, $arrKeys['private']);
echo $strDecrypted;
echo  "<HR>";

?>